LEQ:
  MESH_PAR_FILE: DATA/meshfem3D_files/Mesh_Par_file # Mesh file
  RCOMPS: ['Z', 'R'] # Components of the receiver, order by Z, R, T
  CH_CODE: BX # Channel code
  IMEAS: 4
  NSTEP: 3200 # Number of time steps
  DT: 0.045 # Time step for the LEQ data
  SHORT_P: [3, 7, 12] # Short period of filters
  LONG_P: [10, 12, 20] # Long period of filters
  PRECOND_TYPE: 1 # 1: inner product of acceleration
  SIGMA_H: 8000 # Horizontal smoothing radius
  SIGMA_V: 4000 # Vertical smoothing radius
  USE_RHO_SCALING: True # Whether to use density scaling in adjoint source normalization
  ADJ_SRC_NORM: False # Whether to normalize adjoint source
  WINDOW:
    # Window selection parameters
    # WIN_TYPE:
    # 1: automatic window selection.
    # 2: surface wave window selection by Group velocity.
    # 3: window selection relative to phase arrival time.
    # WIN_TYPE_X corresponds to different parameter sections below.
    WIN_TYPE: 2
    WIN_TYPE_1:
      # This section is for window selection parameters with basic
      # algorithms from Krischer et al., 2015, SRL.
      # The STA/LTA is used to separate phases with algorithm from
      # Maggi et al., 2009, GJI.
      SLIDING_WIN_LEN_FAC: 2.0 # Sliding window length = fac * minimum period, Default: 2.0
      MIN_VELOCITY: 2.3 # Minimum velocity to calculate the end of window, Default: 2.4 km/s
      THRESHOLD_CORR: 0.8 # Minimum cross-correlation to select a window, Default: 0.8
      THRESHOLD_SHIFT_FAC: 0.3 # Maximum time shift to select a window = fac * minimum period, Default: 0.3
      MIN_WIN_LEN_FAC: 1.5 # Minimum window length = fac * minimum period, Default: 1.5
      JUMP_FAC: 0.1 # Jump factor to avoid abrupt change in time shift series, Default: 0.1
      MIN_SNR_WINDOW: 5.0 # Minimum signal to noise ratio in a window, Default: 5.0
      MIN_ENERGY_RATIO: 5.0 # Minimum energy ratio between signal and noise windows, Default: 5.0
      MIN_PEAKS_TROUGHS: 3 # Minimum number of peaks and troughs in a window, Default: 3
      IS_SPLIT_PHASES: False # Whether to split phases into different windows. It is useful for CC based adjoint source.
    WIN_TYPE_2:
      GROUPVEL_MIN: [2.3, 2.3, 2.3] # Approximate minimum group velocity
      GROUPVEL_MAX: [3.2, 3.5, 4.0] # Approximate maximum group velocity
    WIN_TYPE_3:
      PHASE: 'P' # Phase name for window selection
      TIME_WIN: [-5, 10] # Time window relative to the phase arrival (IASP91)

ADJOINT_SOURCE:
  ITAPER_TYPE: 1 # 1: Hanning, 2: Hamming, 3: Cosine, 4: Cosine P10:
  TAPER_PERCENTAGE: 0.3 # Taper percentage of the window length
  CC:
    TSHIFT_LIM: [-5.0, 5.0] # Time shift limits in seconds
    DLNA_LIM: [-1.5, 1.5] # Logarithmic amplitude limits
    CC_MIN: 0.7 # Minimum cross-correlation to calculate time shift and DLNA
    DT_SIGMA_MIN: 1.0 # Minimum sigma for time shift
    DLNA_SIGMA_MIN: 0.5 # Minimum sigma for DLNA
  MT:
    NUM_TAPER: 5 # Number of tapers
    MT_NW: 4.0 # Time-bandwidth product
    PHASE_STEP: 1.5 # Phase step in seconds
    TRANSFUNC_WATERLEVEL: 1e-10 # Waterlevel for transfer function
    WATER_THRESHOLD: 0.02 # Minimum waveform amplitude to calculate MT adjoint source
    DT_FAC: 2.0 # Factor to calculate sigma for time shift
    ERR_FAC: 2.5 # Factor to calculate error for DLNA
    DT_MAX_SCALE: 3.5 # Maximum scaling for time shift sigma
    MIN_CYCLE_IN_WINDOW: 3 # Minimum number of cycles in a window to calculate MT adjoint source
    USE_MT_ERROR: False # Whether to use MT error estimation
  ENV:
    WTR_ENV: 0.2 # Waterlevel add to envelope

OUTPUT:
  IS_OUTPUT_PREPROC: True # Output preprocessed data
  IS_OUTPUT_ADJ_SRC: True # Output adjoint sources
  IS_OUTPUT_EVENT_KERNEL: True # Output kernels
  IS_OUTPUT_SUM_KERNEL: True # Output sum of kernels
  IS_OUTPUT_INV_GRID: False # Output inverse grid

MODEL_GRID:
  REGULAR_GRID_MIN_COORD: [722561, -110599, -32000]
  REGULAR_GRID_INTERVAL: [2000, 2000, 500]
  REGULAR_GRID_SIZE: [113, 113, 65]

POSTPROC:
  INV_TYPE: [False, False, True] # Inversion type of noise and teleseismic data
  JOINT_WEIGHT: [0.0, 0.5, 1.0]
  TAPER_H_SUPPRESS: 0
  TAPER_H_BUFFER: 0
  TAPER_V_SUPPRESS: 0
  TAPER_V_BUFFER: 0
  IS_PRECOND: False

MODEL_UPDATE:
  INIT_MODEL_PATH: initial_model.h5
  MODEL_TYPE: 1 # 1: vp,vs,rho; 2: L,N,Gc,Gs
  OPT_METHOD: 2 # Optimization method, 1: SD; 2: LBFGS; 3: CG
  ITER_START: 0
  LBFGS_M_STORE: 5
  MAX_SLEN: 0.02 # Maximum step length
  MAX_SHRINK: 0.618 # Maximum shrink factor
  MAX_SUB_ITER: 10
  DO_LS: false # Do line search
  C1: 0.1
  VPVS_RATIO_RANGE: [1.3, 2.5] # Min and max limitation of Vp/Vs ratio
